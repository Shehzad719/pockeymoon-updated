(window.webpackJsonp=window.webpackJsonp||[]).push([[489],{1281:function(t,e,o){"use strict";o.r(e);var n=function(t,e,o){o("impression","show_widget"),window.google.accounts.id.initialize({client_id:t,callback:t=>{e(t.credential)},cancel_on_tap_outside:!1}),window.google.accounts.id.prompt()};var r=function(t){const form=document.createElement("form");form.method="post",form.action="/ab/account-security/sso",Object.entries({id_token:t,state:"?ssoProvider=google"}).forEach((t=>{let[e,o]=t;const input=document.createElement("input");input.name=e,input.value=o,form.appendChild(input)})),document.body.appendChild(form),form.submit()};let c;var l={methods:{trackEvent(t){const e="page"===t.event?["olog"]:["olog","snowplow"];return this.$tracker.track({...t,trackers:e})},async logEvent(t){const e={...t};var o;o="id",{}.hasOwnProperty.call(t.data||{},o)&&(e.data.id=this.$store.state.context.user.uid),await this.trackEvent(e)},async logImpressionEvent(t,e){!c&&e&&(await this.logEvent(e),c=!0),await this.logEvent(t)},extendLogData:(t,data)=>({...t,data:{...t.data||{},...data}})}},d=o(0),h={mixins:[Object(d.a)(l,undefined,undefined,!1,null,null,null).exports],props:{clientId:{type:String,required:!0}},methods:{authorize(t){this.processGoogleOneTapUser(t)},logWidget(t,label){this.logEvent({event:t,sublocation:"one_tap_sign_up",label:label})},async processGoogleOneTapUser(t){const e=await this.$iovation.bbPromise;await this.signUpWithOneTap(t,e)},async signUpWithOneTap(t,e){const{login:o,redirectTo:n}=await this.authorizeWithOneTap(t);if(o){const n=await this.logIn(e,o,t);if(!n)return;const{success:c,mode:l}=n;if(!c&&"password"===l)return void r(t);this.logWidget("click","existing_user_with_one_tap"),window.location.href="/signup/home/"}else n&&(this.logWidget("click","new_user_with_one_tap"),window.location.href=n)},authorizeWithOneTap(t){return this.$http({handleApiErrors:!1}).url("/signup/one-tap-redirect-url?credential=".concat(encodeURI(t))).get().json()},logIn(t,e,o){return this.$http({handleApiErrors:!1}).url("/ab/account-security/login").get().json().then((n=>{let{fields:r,redirectUrl:c}=n;if(!r)return c&&(window.location.href=c),!1;const l={};return l[r.mode]="sso",l[r.iovation]=t,l[r.sso_user_data]={email:e,authResponse:{id_token:o},provider:"google"},this.$http({handleApiErrors:!1}).url("/ab/account-security/login").post(l).json()}))}},head(){return{script:[{hid:"google-qsi-client",src:"https://accounts.google.com/gsi/client",defer:!0,callback:()=>{n(this.clientId,this.authorize,this.logWidget)}}]}}},w=Object(d.a)(h,(function(){return(0,this._self._c)("div")}),[],!1,null,null,null);e.default=w.exports}}]);
//# sourceMappingURL=https://upwork-usw2-staging-assets-jsmaps.s3.us-west-2.amazonaws.com/Brontes/up-s-google-one-tap.ae04e1c8.js.map